apply plugin: 'java-library'

compileTestJava {
    /*
     *  Annotation processor arguments:
     *   umdb_room_out - Destination directory for the generated room version of database and DAO classes
     */
    options.compilerArgs += [
        "-Aumdb_jdbc_out=" + project.file("build/generated/sources/test-umdbprocessor").getAbsolutePath(),
        "-Aumdb_no_default_factory=true"
    ]
}

sourceSets {
    test {
        java {
            srcDirs += ["build/generated/sources/test-umdbprocessor"]
        }
    }
}


dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation project(':lib-database-runtime')
    implementation project(":lib-room-annotations")
    api "org.apache.commons:commons-lang3:$version_apache_commons_lang"

    testAnnotationProcessor project(':lib-database-annotation-processor')
    testImplementation "com.github.h-thurow:simple-jndi:$version_simple_jndi"
    testImplementation "org.xerial:sqlite-jdbc:$version_sqlite_jdbc"
    testImplementation "junit:junit:$version_junit"
    testImplementation "org.mockito:mockito-core:$version_core_mockito"

    compile project(path: ':lib-util')
}

sourceCompatibility = "1.8"
targetCompatibility = "1.8"
